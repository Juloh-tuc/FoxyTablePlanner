/* ===========================
   Planner Agile (Kanban) — board centré + post-it en dessous (rem)
   =========================== */

:root{
  --wrap-max: 87.5rem;        /* 1400px -> rem */
  --gutter: 1rem;             /* 16px */

  --border: #e5e7eb;
  --text: #111827;
  --muted: #6b7280;
  --surface: #ffffff;
  --surface-2: #fafafa;
  --shadow-sm: 0 0.0625rem 0.125rem rgba(0,0,0,.06);
  --shadow:    0 0.25rem 0.75rem rgba(0,0,0,.08);

  /* Palette statuts */
  --done-bg:    #ecfdf5; --done-brd: #34d399; --done-txt: #065f46;
  --prog-bg:    #fefce8; --prog-brd: #facc15; --prog-txt: #713f12;
  --block-bg:   #fef2f2; --block-brd:#fca5a5; --block-txt:#7f1d1d;
  --todo-bg:    #eff6ff; --todo-brd: #93c5fd; --todo-txt: #1e3a1a; /* inchangé */
}

/* ============ Layout général ============ */
.agile{ display:block; }
.bleed-xl{
  max-width: var(--wrap-max);
  margin-inline: auto;
  padding: var(--gutter);
}

/* ============ Onglets (mobile) ============ */
.agile-tabs{
  display:flex; gap:0.5rem; align-items:center; overflow:auto;
  padding:0.375rem 0.125rem; margin-bottom:0.625rem;
}
.agile-tab{
  padding:0.5rem 0.75rem; border-radius:999px;
  border:1px solid var(--border); background:#fff; font-weight:700; white-space:nowrap;
  transition: transform .12s ease, box-shadow .12s ease;
}
.agile-tab .count{
  margin-left:0.375rem; font-weight:800; background:#f3f4f6; padding:0.125rem 0.5rem; border-radius:999px;
}
.agile-tab:hover{ transform: translateY(-0.0625rem); box-shadow: var(--shadow-sm); }
.agile-tab.active{ background:#fafafa; box-shadow: var(--shadow-sm); }
.agile-tabs .add{ margin-left:auto; }

/* ============ Board ============ */
.kan-board{
  display:grid; grid-template-columns: 1fr; gap:0.75rem;
}
@media (min-width:61.25rem){ /* 980px */
  .kan-board{ grid-template-columns: repeat(4, 1fr); gap:0.875rem; }
}
/* Colonnes confort desktop+ */
@media (min-width:80rem){ /* 1280px */
  .kan-board{ grid-template-columns: repeat(4, minmax(20rem, 1fr)); gap: 1.125rem; }
}

.kan-col{
  border:1px solid var(--border); background:var(--surface); border-radius:1rem; overflow:hidden;
  box-shadow: var(--shadow-sm);
}
.kan-col__title{
  font-weight:800; padding:0.625rem 0.75rem; background:var(--surface-2); border-bottom:1px solid var(--border);
  display:flex; align-items:center; justify-content:space-between;
}
.kan-col__title .count{
  font-weight:800; padding:0.125rem 0.5rem; border-radius:999px;
  border:1px solid var(--border); background:#fff; font-variant-numeric: tabular-nums;
}

/* En-têtes colorés par statut */
.kan-col__title.is-done{
  background: linear-gradient(90deg, rgba(52,211,153,.18), transparent 40%);
  box-shadow: inset 0.25rem 0 0 0 var(--done-brd); /* 4px */
}
.kan-col__title.is-progress{
  background: linear-gradient(90deg, rgba(250,204,21,.18), transparent 40%);
  box-shadow: inset 0.25rem 0 0 0 var(--prog-brd);
}
.kan-col__title.is-blocked{
  background: linear-gradient(90deg, rgba(252,165,165,.22), transparent 40%);
  box-shadow: inset 0.25rem 0 0 0 var(--block-brd);
}
.kan-col__title.is-todo{
  background: linear-gradient(90deg, rgba(147,197,253,.20), transparent 40%);
  box-shadow: inset 0.25rem 0 0 0 var(--todo-brd);
}

.kan-col__list{ padding:0.625rem; display:flex; flex-direction:column; gap:0.625rem; min-height:7.5rem; }

/* ============ Cartes ============ */
.kan-card{
  border:1px solid var(--border); background:#fff; border-radius:0.75rem; padding:0.625rem;
  box-shadow: var(--shadow-sm);
  transition: box-shadow .12s ease, transform .12s ease;
}
.kan-card:hover{ transform: translateY(-0.0625rem); box-shadow: var(--shadow); }
.kan-card.is-edit{ outline:0.125rem dashed #c7d2fe; outline-offset:0.125rem; }

.kan-card__top{
  display:flex; align-items:center; gap:0.5rem; justify-content:space-between; margin-bottom:0.375rem;
}
.kan-card__title{ font-weight:800; color:var(--text); }
.kan-card__actions{ display:flex; gap:0.375rem; }

/* Boutons */
.btn{
  padding:0.5rem 0.75rem; border-radius:0.625rem; background:#fff; cursor:pointer;
  border:1px solid var(--border);
  transition: box-shadow .12s ease, transform .12s ease, background .12s ease, border-color .12s ease;
}
.btn:hover{ box-shadow: var(--shadow-sm); transform: translateY(-0.0625rem); }
/* ne pas écraser le .primary */
.btn.primary{ background:#7C3AED; color:#fff; border-color:#7C3AED; }
.btn.icon{ padding:0.375rem 0.5rem; }
.btn.danger { background:#fee2e2; border-color:#fecaca; color:#7a1c1c; }
.btn.danger:hover{ background:#fff1f2; }

/* Hover générique qui n’écrase pas .primary */
.btn:not(.primary):hover{
  background:#fff;
}

/* Meta */
.kan-card__meta{
  display:flex; gap:0.5rem; align-items:center; flex-wrap:wrap; margin-bottom:0.5rem;
}

/* Tags */
.tag{
  display:inline-flex; align-items:center; gap:0.375rem; padding:0.25rem 0.625rem; border-radius:999px; font-size:.85rem; font-weight:700;
  background:#EEF2FF; border:1px solid var(--border); color:#1e293b;
}

/* Notes */
.kan-card__notes{ display:flex; flex-direction:column; gap:0.25rem; }
.kan-card__notes textarea{
  border:1px solid var(--border); border-radius:0.625rem; padding:0.5rem 0.625rem; resize:vertical;
}

/* Form inline (édition détaillée) */
.kan-edit__grid{
  display:grid; grid-template-columns: 1fr 1fr; gap:0.5rem; margin-bottom:0.5rem;
}
.field{ display:flex; flex-direction:column; gap:0.25rem; font-size:.9rem; }
.field .label{ font-weight:700; color:#111827; }
.input, .select, .textarea{
  padding:0.5rem 0.625rem; border:1px solid var(--border); border-radius:0.625rem; background:#fff;
}
.textarea{ resize:vertical; }
.field.span-2{ grid-column: 1 / -1; }
.kan-edit__actions{ display:flex; justify-content:flex-end; gap:0.5rem; }

/* ============ Badges de priorité ============ */
.badge-prio{
  display:inline-flex; align-items:center; gap:0.375rem; padding:0.25rem 0.625rem; border-radius:999px; font-size:.85rem; font-weight:700;
  border:1px solid var(--border); background:#fff; color:#374151;
}
.badge-prio .dot{ width:0.5rem; height:0.5rem; border-radius:999px; display:inline-block; margin-right:0.125rem; }
.badge-prio[data-level="Élevé"] .dot{ background:#ef4444; }
.badge-prio[data-level="Moyen"] .dot{ background:#f59e0b; }
.badge-prio[data-level="Faible"] .dot{ background:#10b981; }

/* ============ Badges de statut (couleurs) ============ */
.status-chip{
  display:inline-flex; align-items:center; gap:0.375rem;
  padding:0.25rem 0.625rem; border-radius:999px; font-size:.85rem; font-weight:700;
  border:1px solid var(--border);
}
.status-chip .dot{ width:0.5rem; height:0.5rem; border-radius:999px; display:inline-block; }

.status-chip.is-done{    background: var(--done-bg);  border-color: var(--done-brd);  color: var(--done-txt); }
.status-chip.is-done .dot{ background: var(--done-brd); }
.status-chip.is-progress{ background: var(--prog-bg);  border-color: var(--prog-brd);  color: var(--prog-txt); }
.status-chip.is-progress .dot{ background: var(--prog-brd); }
.status-chip.is-blocked{ background: var(--block-bg); border-color: var(--block-brd); color: var(--block-txt); }
.status-chip.is-blocked .dot{ background: var(--block-brd); }
.status-chip.is-todo{    background: var(--todo-bg);  border-color: var(--todo-brd);  color: var(--todo-txt); }
.status-chip.is-todo .dot{ background: var(--todo-brd); }

/* ============ Quick-add (bouton + mini-formulaire) ============ */
.kan-quickadd { display:block; }

.kan-quickadd__cta{
  width:100%;
  display:flex; align-items:center; gap:0.625rem;
  padding:0.625rem 0.75rem; border-radius:0.75rem;
  border:0.09375rem dashed var(--border); /* 1.5px */
  background: #fcfbff;
  font-weight:800; cursor:pointer;
  transition: border-color .12s ease, box-shadow .12s ease, transform .12s ease, background .12s ease;
}
.kan-quickadd__cta .plus{
  display:inline-grid; place-items:center;
  width:1.75rem; height:1.75rem; border-radius:999px;
  border:1px solid var(--border); font-size:1.125rem; line-height:1;
}
.kan-quickadd__cta:hover{
  transform: translateY(-0.0625rem);
  border-color:#C4B5FD; /* violet clair */
  box-shadow: var(--shadow-sm);
  background:#fff;
}
.kan-quickadd__cta:focus-visible{
  outline:0.1875rem solid #C4B5FD; outline-offset:0.125rem; /* 3px / 2px */
}

.kan-quickadd__form{
  display:grid; gap:0.5rem;
  grid-template-columns: 1fr minmax(7.5rem, 8.75rem) minmax(8.75rem, 1fr); /* 120–140–auto */
  border:1px solid var(--border); border-radius:0.75rem; padding:0.625rem;
  background:#fff; box-shadow: var(--shadow-sm);
}
.kan-quickadd__form .input,
.kan-quickadd__form .select{
  padding:0.5rem 0.625rem; border:1px solid var(--border); border-radius:0.625rem; background:#fff;
}
.kan-quickadd__form .title{ grid-column: 1 / -1; }
.kan-quickadd__form .prio{ grid-column: 1 / 2; }
.kan-quickadd__form .assignee{ grid-column: 2 / 3; }
.kan-quickadd__form .actions{
  grid-column: 3 / 4;
  display:flex; justify-content:flex-end; gap:0.5rem; align-items:center;
}

@media (min-width:61.25rem){ /* 980px */
  .kan-quickadd__form .title{ grid-column: 1 / 4; }
  .kan-quickadd__form .prio{ grid-column: 1 / 2; }
  .kan-quickadd__form .assignee{ grid-column: 2 / 3; }
  .kan-quickadd__form .actions{ grid-column: 3 / 4; }
}
@media (max-width:61.1875rem){ /* 979px */
  .kan-quickadd__form{ grid-template-columns: 1fr 1fr; }
  .kan-quickadd__form .title{ grid-column: 1 / -1; }
  .kan-quickadd__form .prio{ grid-column: 1 / 2; }
  .kan-quickadd__form .assignee{ grid-column: 2 / 3; }
  .kan-quickadd__form .actions{ grid-column: 1 / -1; justify-content:flex-end; }
}

/* ============ Section Notes (post-its sous le board) ============ */
.agile-notes{
  max-width: var(--wrap-max);
  margin: 1.5rem auto 0.5rem auto; /* 24px 0 8px */
  padding: 0 var(--gutter);
}
.agile-notes__title{
  display:flex; align-items:center; gap:0.625rem;
  font-weight:800; color:var(--muted); margin-bottom:0.625rem;
  letter-spacing:.02em; text-transform:uppercase; font-size:.85rem;
}
.agile-notes__wrap{
  display: grid;
  grid-template-columns: repeat( auto-fit, minmax(13.75rem, 1fr) ); /* 220px */
  gap: 0.875rem; /* 14px */
}

/* Post-it carte */
.sticky{
  background:#fff7cc;         /* jaune pastel par défaut */
  border:1px solid #f4d35e;
  border-radius: 0.75rem;      /* 12px */
  padding: 0;
  box-shadow: 0 0.5rem 1.25rem rgba(0,0,0,.08); /* 8px 20px */
  transform: rotate(-1.5deg);
  min-height: 13.75rem;        /* 220px */
  display:flex;
}
.sticky textarea{
  flex:1; border:none; resize:vertical; min-height: 13.75rem;
  background:transparent; padding:0.875rem;
  font-family: "Comic Sans MS", "Marker Felt", cursive, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: 1rem; font-weight: 500; color:#3b2f00; line-height:1.4;
}
.sticky textarea:focus{ outline:none; }

/* Variantes */
.sticky.pink{  background:#ffe9f2; border-color:#fbcfe8; }
.sticky.green{ background:#e9ffef; border-color:#bbf7d0; }
.sticky.blue{  background:#e6f0ff; border-color:#c7d7ff; }

/* ============ Accessibilité ============ */
.visually-hidden{
  position:absolute!important; height:1px; width:1px; overflow:hidden; clip:rect(1px,1px,1px,1px);
  white-space:nowrap; border:0; padding:0; margin:-1px;
}
input:focus-visible, select:focus-visible, textarea:focus-visible, .btn:focus-visible{
  outline:0.1875rem solid #C4B5FD; outline-offset:0.125rem; /* 3px / 2px */
}
